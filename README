-----------------------------------------------------------------------------
Cloonix is an AGPLv3 software that constitute a tool to create networks of
kvm virtual machines or crun, docker and podman containers.

The network connecting the virtual machines and containers is created through
the use of the openvswitch software running inside a net namespace so that
your host is not polluted with bridges and "ip addr" on your host shows clean
results.

The openvswitch commands are simplified by cloonix which provides a very
simple user interface to connect virtual machines and containers through
virtual lans.

Cloonix provides root access pseudo-ssh and pseudo-scp (ssh and scp equivalent)
for every virtual machines or containers without use of any ip interface
inside the virtual machines or container.

Cloonix provides a graphical interactive canvas showing the topology for
your network.

See clownix.net for a documentation (which is usually not up to date).
http://clownix.net/doc_stored/build-27-02/html/index.html doc.

NOTE: qemu-guest-agent sometimes called qemu-ga has to be installed
      inside the kvm guests virtual machines to have the pseudo-ssh and
      pseudo-scp.
      For the cisco or mikrotik particular case, cloonix provides another
      type of pseudo-ssh and pseudo-scp not using qemu-guest-agent but
      entering through one of the ip interface of the virtual.

-----------------------------------------------------------------------------
DOWNLOADS:

http://clownix.net/downloads/cloonix-27

-----------------------------------------------------------------------------
THIS SOFTWARE HAS BEEN COMPILED AND TESTED ON:

            jammy   (ubuntu 22.04),
            bookworm (debian 12),
            bullseye (debian 11),
            tumbleweed (rolling opensuse),
            fedora36
            centos9

-----------------------------------------------------------------------------
INSTALL CLOONIX ON YOUR HOST:

wget http://clownix.net/downloads/cloonix-27/cloonix-27-02.tar.gz
tar xvf cloonix-27-02.tar.gz
cd cloonix-27-02
sudo ./install_depends

wget http://clownix.net/downloads/cloonix-27/targz_store.tar.gz
tar xvf targz_store.tar.gz

./doitall

NOTE: Before calling ./install_depends, you can take out the installation
      of the podman which is not necessary for using cloonix with kvm or
      crun.

-----------------------------------------------------------------------------
FOR KVM VIRTUAL MACHINE GET A WORKING QCOW AND PUT IT IN BULK:

wget http://clownix.net/downloads/cloonix-27/bulk/bookworm.qcow2.gz

mkdir -p ${HOME}/cloonix_data/bulk
cp bookworm.qcow2.gz ${HOME}/cloonix_data/bulk
cd ${HOME}/cloonix_data/bulk
gunzip bookworm.qcow2.gz

-----------------------------------------------------------------------------
FOR CRUN CONTAINER GET A WORKING IMG AND PUT IT IN BULK:

wget http://clownix.net/downloads/cloonix-27/bulk/bookworm.img.gz
cp bookworm.img.gz ${HOME}/cloonix_data/bulk
cd ${HOME}/cloonix_data/bulk
gunzip bookworm.img.gz

-----------------------------------------------------------------------------
LAUNCH KVM EXAMPLE:

cd cloonix/quickstart/demos
./ping_kvm.sh

On the gui, a double-click on the blue machine gives a shell,
a double-click on the green interface gives a wireshark spy,
a right-click on the blue machine gives a spice desktop.
If wireshark problems, authorize wireshark for non-root and
do "sudo adduser ${USER} wireshark".

-----------------------------------------------------------------------------
LAUNCH CRUN EXAMPLE:

cd cloonix/quickstart/demos
./ping_crun.sh

On the gui, a double-click on the blue machine gives a shell,
a double-click on the green interface gives a wireshark spy.

Note: the containers have hardware coded ip_forward disable_ipv6,
see in file cloonix/server/suid_power/src/config_json.h and change
configuration to your convenience.

-----------------------------------------------------------------------------
CREATION OF THE QCOW2 AND IMG FILES:

cd cloonix/quickstart/create_cnt_kvm/create_kvm for qcow2
cd cloonix/quickstart/create_cnt_kvm/create_cnt for img 

-----------------------------------------------------------------------------
TEST OF CISCO OR MIKROTIK FEATURE:

cd cloonix/quickstart/create_cnt_kvm/cisco
cd cloonix/quickstart/create_cnt_kvm/mikrotik

-----------------------------------------------------------------------------
Beware: The phy item in cloonix represents real interfaces of the host machine,
        the command to use this phy item in cloonix makes an interface dive
        into the cloonix net namespace. As a consequence this command takes
        the interface out from the list of host interfaces.

        For example, in my host there is an interface named enp6s0, the
        command: "cloonix_cli nemo add phy enp6s0" takes out that interface
        from the host default namespace and puts it in the "cloonix_nemo"
        namespace.
        This interface it visible in its new namespace with the command:
        "sudo ip netns exec cloonix_nemo ip link".

        That means the phy item should not be used if the interface you wish
        to use in cloonix is currently used by your host. 
==============================================================================



