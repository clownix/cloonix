diff -Naur dpdk/drivers/meson.build dpdk_tainted/drivers/meson.build
--- dpdk/drivers/meson.build	2020-10-16 13:48:22.000000000 +0200
+++ dpdk_tainted/drivers/meson.build	2020-10-16 13:53:36.699765208 +0200
@@ -146,6 +146,7 @@
 				objects: objs,
 				include_directories: includes,
 				dependencies: static_deps,
+                                install_rpath : '/usr/local/bin/cloonix/server/dpdk/lib',
 				c_args: cflags,
 				install: true)
 
@@ -197,6 +198,7 @@
 				version: abi_version,
 				soversion: so_version,
 				install: true,
+                                install_rpath : '/usr/local/bin/cloonix/server/dpdk/lib',
 				install_dir: driver_install_path)
 
 			# create a dependency object and add it to the global dictionary so
diff -Naur dpdk/drivers/net/tap/rte_eth_tap.c dpdk_tainted/drivers/net/tap/rte_eth_tap.c
--- dpdk/drivers/net/tap/rte_eth_tap.c	2020-10-16 13:48:22.000000000 +0200
+++ dpdk_tainted/drivers/net/tap/rte_eth_tap.c	2020-10-16 13:53:36.699765208 +0200
@@ -1922,7 +1922,8 @@
 	/* Setup some default values */
 	data = dev->data;
 	data->dev_private = pmd;
-	data->dev_flags = RTE_ETH_DEV_INTR_LSC;
+//	data->dev_flags = RTE_ETH_DEV_INTR_LSC;
+	data->dev_flags = 0;
 	data->numa_node = numa_node;
 
 	data->dev_link = pmd_link;
diff -Naur dpdk/drivers/net/virtio/virtio_ethdev.c dpdk_tainted/drivers/net/virtio/virtio_ethdev.c
--- dpdk/drivers/net/virtio/virtio_ethdev.c	2020-10-16 13:48:22.000000000 +0200
+++ dpdk_tainted/drivers/net/virtio/virtio_ethdev.c	2020-10-16 13:53:36.699765208 +0200
@@ -2219,19 +2219,19 @@
 	PMD_INIT_LOG(DEBUG, "configure");
 	req_features = VIRTIO_PMD_DEFAULT_GUEST_FEATURES;
 
-	if (rxmode->mq_mode != ETH_MQ_RX_NONE) {
-		PMD_DRV_LOG(ERR,
-			"Unsupported Rx multi queue mode %d",
-			rxmode->mq_mode);
-		return -EINVAL;
-	}
-
-	if (txmode->mq_mode != ETH_MQ_TX_NONE) {
-		PMD_DRV_LOG(ERR,
-			"Unsupported Tx multi queue mode %d",
-			txmode->mq_mode);
-		return -EINVAL;
-	}
+//	if (rxmode->mq_mode != ETH_MQ_RX_NONE) {
+//		PMD_DRV_LOG(ERR,
+//			"Unsupported Rx multi queue mode %d",
+//			rxmode->mq_mode);
+//		return -EINVAL;
+//	}
+//
+//	if (txmode->mq_mode != ETH_MQ_TX_NONE) {
+//		PMD_DRV_LOG(ERR,
+//			"Unsupported Tx multi queue mode %d",
+//			txmode->mq_mode);
+//		return -EINVAL;
+//	}
 
 	if (dev->data->dev_conf.intr_conf.rxq) {
 		ret = virtio_init_device(dev, hw->req_guest_features);
diff -Naur dpdk/drivers/net/virtio/virtio_user_ethdev.c dpdk_tainted/drivers/net/virtio/virtio_user_ethdev.c
--- dpdk/drivers/net/virtio/virtio_user_ethdev.c	2020-10-16 13:48:22.000000000 +0200
+++ dpdk_tainted/drivers/net/virtio/virtio_user_ethdev.c	2020-10-16 13:53:36.703766385 +0200
@@ -279,7 +279,7 @@
 	else if (status == VIRTIO_CONFIG_STATUS_RESET)
 		virtio_user_reset(hw);
 	dev->status = status;
-	virtio_user_send_status_update(dev, status);
+//	virtio_user_send_status_update(dev, status);
 }
 
 static uint8_t
@@ -287,7 +287,7 @@
 {
 	struct virtio_user_dev *dev = virtio_user_get_dev(hw);
 
-	virtio_user_update_status(dev);
+//	virtio_user_update_status(dev);
 
 	return dev->status;
 }
@@ -558,6 +558,7 @@
 virtio_user_backend_type(const char *path)
 {
 	struct stat sb;
+	return VIRTIO_USER_BACKEND_VHOST_USER;
 
 	if (stat(path, &sb) == -1) {
 		PMD_INIT_LOG(ERR, "Stat fails: %s (%s)\n", path,
@@ -700,12 +701,12 @@
 
 
 	if (rte_kvargs_count(kvlist, VIRTIO_USER_ARG_INTERFACE_NAME) == 1) {
-		if (backend_type != VIRTIO_USER_BACKEND_VHOST_KERNEL) {
-			PMD_INIT_LOG(ERR,
-				"arg %s applies only to vhost-kernel backend",
-				VIRTIO_USER_ARG_INTERFACE_NAME);
-			goto end;
-		}
+//		if (backend_type != VIRTIO_USER_BACKEND_VHOST_KERNEL) {
+//			PMD_INIT_LOG(ERR,
+//				"arg %s applies only to vhost-kernel backend",
+//				VIRTIO_USER_ARG_INTERFACE_NAME);
+//			goto end;
+//		}
 
 		if (rte_kvargs_process(kvlist, VIRTIO_USER_ARG_INTERFACE_NAME,
 				       &get_string_arg, &ifname) < 0) {
diff -Naur dpdk/lib/librte_eal/common/eal_common_options.c dpdk_tainted/lib/librte_eal/common/eal_common_options.c
--- dpdk/lib/librte_eal/common/eal_common_options.c	2020-10-16 13:48:22.000000000 +0200
+++ dpdk_tainted/lib/librte_eal/common/eal_common_options.c	2020-10-16 13:53:36.703766385 +0200
@@ -121,7 +121,9 @@
 
 #ifndef RTE_EXEC_ENV_WINDOWS
 /* Default path of external loadable drivers */
-static const char *default_solib_dir = RTE_EAL_PMD_PATH;
+//static const char *default_solib_dir = RTE_EAL_PMD_PATH;
+static const char *default_solib_dir = "/usr/local/bin/cloonix/server/dpdk/lib";
+
 #endif
 
 /*
diff -Naur dpdk/lib/librte_eal/linux/eal.c dpdk_tainted/lib/librte_eal/linux/eal.c
--- dpdk/lib/librte_eal/linux/eal.c	2020-10-16 13:48:22.000000000 +0200
+++ dpdk_tainted/lib/librte_eal/linux/eal.c	2020-10-16 13:53:36.703766385 +0200
@@ -97,13 +97,13 @@
 	char tmp[PATH_MAX];
 	int ret;
 
-	if (getuid() != 0) {
+//cloonix	if (getuid() != 0) {
 		/* try XDG path first, fall back to /tmp */
 		if (xdg_runtime_dir != NULL)
 			directory = xdg_runtime_dir;
 		else
 			directory = fallback;
-	}
+//cloonix	}
 	/* create DPDK subdirectory under runtime dir */
 	ret = snprintf(tmp, sizeof(tmp), "%s/dpdk", directory);
 	if (ret < 0 || ret == sizeof(tmp)) {
diff -Naur dpdk/lib/librte_vhost/vhost.c dpdk_tainted/lib/librte_vhost/vhost.c
--- dpdk/lib/librte_vhost/vhost.c	2020-10-16 13:48:22.000000000 +0200
+++ dpdk_tainted/lib/librte_vhost/vhost.c	2020-10-16 13:53:36.703766385 +0200
@@ -565,7 +565,10 @@
 {
 	struct vhost_virtqueue *vq;
 
-	vq = rte_malloc(NULL, sizeof(struct vhost_virtqueue), 0);
+//CLOONIX cloonix DANGER
+//	vq = rte_malloc(NULL, sizeof(struct vhost_virtqueue), 0);
+	vq = malloc(sizeof(struct vhost_virtqueue));
+//CLOONIX cloonix DANGER
 	if (vq == NULL) {
 		VHOST_LOG_CONFIG(ERR,
 			"Failed to allocate memory for vring:%u.\n", vring_idx);
diff -Naur dpdk/lib/meson.build dpdk_tainted/lib/meson.build
--- dpdk/lib/meson.build	2020-10-16 13:48:22.000000000 +0200
+++ dpdk_tainted/lib/meson.build	2020-10-16 13:53:36.703766385 +0200
@@ -126,6 +126,7 @@
 					c_args: cflags,
 					dependencies: static_deps,
 					include_directories: includes,
+                                        install_rpath : '/usr/local/bin/cloonix/server/dpdk/lib',
 					install: true)
 			static_dep = declare_dependency(
 					include_directories: includes,
@@ -188,6 +189,7 @@
 					link_depends: lk_deps,
 					version: abi_version,
 					soversion: so_version,
+                                        install_rpath : '/usr/local/bin/cloonix/server/dpdk/lib',
 					install: true)
 			shared_dep = declare_dependency(link_with: shared_lib,
 					include_directories: includes,
